(()=>{var o={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},d:(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},t={};(()=>{"use strict";o.r(t);const e=flarum.core.compat["forum/app"];var n=o.n(e);const r=flarum.core.compat["common/extend"],a=flarum.core.compat["common/components/Badge"];var s=o.n(a);const c=flarum.core.compat["common/models/Discussion"];var i=o.n(c);const u=flarum.core.compat["common/components/Button"];var d=o.n(u);const k=flarum.core.compat["forum/components/DiscussionPage"];var l=o.n(k);const p=flarum.core.compat["forum/utils/DiscussionControls"];var f=o.n(p);function b(o,t,e){void 0===e&&(e="");var r=o.attribute("bookmarked");return d().component({className:e+(r?" Button--bookmarked":""),icon:r?"fas fa-bookmark":"far fa-bookmark",onclick:function(){o.save({bookmarked:!r}).then((function(){m.redraw()}))}},n().translator.trans("clarkwinkelmann-discussion-bookmarks.forum."+t+"."+(r?"remove":"add")))}const v=flarum.core.compat["forum/states/GlobalSearchState"];var B=o.n(v);const g=flarum.core.compat["forum/states/DiscussionListState"];var y=o.n(g);const h=flarum.core.compat["forum/components/IndexPage"];var x=o.n(h);const w=flarum.core.compat["common/components/LinkButton"];var P=o.n(w);n().initializers.add("clarkwinkelmann-discussion-bookmarks",(function(){(0,r.extend)(i().prototype,"badges",(function(o){this.attribute("bookmarked")&&o.add("bookmarked",s().component({label:n().translator.trans("clarkwinkelmann-discussion-bookmarks.forum.badge"),icon:"fas fa-bookmark",type:"discussion-bookmark"}))})),(0,r.extend)(f(),"userControls",(function(o,t,e){!n().session.user||n().forum.attribute("independentDiscussionBookmarkButton")&&e instanceof l()||o.add("bookmark",b(t,"dropdownButton"))})),(0,r.extend)(l().prototype,"sidebarItems",(function(o){n().session.user&&n().forum.attribute("independentDiscussionBookmarkButton")&&this.discussion&&o.add("bookmark",b(this.discussion,"independentButton","Button Button--bookmark"))})),"v17development/blog/pages/BlogItem"in flarum.core.compat&&(0,r.extend)(flarum.core.compat["v17development/blog/pages/BlogItem"].prototype,"contentItems",(function(o){n().session.user&&this.article&&o.add("bookmark",m(".FlarumBlog-Article-Content-Bookmark-Button",b(this.article,"independentButton","Button Button--bookmark")),78)})),n().routes.discussionBookmarks={path:"/bookmarked-discussions",component:x()},(0,r.extend)(x().prototype,"navItems",(function(o){n().session.user&&o.add("discussion-bookmarks",P().component({href:n().route("discussionBookmarks",n().search.stickyParams()),icon:"fas fa-bookmark"},n().translator.trans("clarkwinkelmann-discussion-bookmarks.forum.page.link")))})),(0,r.extend)(x().prototype,"setTitle",(function(){"discussionBookmarks"===n().current.get("routeName")&&n().setTitle(n().translator.trans("clarkwinkelmann-discussion-bookmarks.forum.page.title"))})),(0,r.extend)(B().prototype,"params",(function(o){o.bookmarked="discussionBookmarks"===n().current.get("routeName")})),(0,r.extend)(y().prototype,"requestParams",(function(o){this.params.bookmarked&&(o.filter.q=(o.filter.q||"")+" is:bookmarked")}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map